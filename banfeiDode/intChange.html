<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<title>兑换积分</title>
		<link rel="stylesheet" href="css/common.css">
		<link rel="stylesheet" href="css/mescroll.css">
		<link rel="stylesheet" href="css/intChange.css">
	</head>
	<script>
        document.getElementsByTagName("html")[0].style.fontSize=window.screen.width/10+"px";
    </script>
	<body>
		<div class="myIntergral">
			<img src="img/head_1.png" alt="" class="backInt"/>
			<div class="contInt exchang" style="height: 3.5rem;margin: 20% 0 0 5%;">
				<img src="img/c_1.png" alt="" class="headInt" style="top: -.8rem;"/>	
				<img src="img/c_2.png" alt="" class="change_img"/>	
				<div class="contInt_title">11500415646</div>
			</div>
			<div class="exchang_main">
				<img src="img/c_5.png" alt="" class="exchang_img"/>
				<div id="mescroll" class="mescroll" style="top: .5rem;width: 90%;height:9.8rem;left:.5rem;">
					<ul class="exchang_item" id="intList">
						<!--<li>
							<img src="img/c_6.png" alt="" class="exItem_img"/>
							<div class="exItem_name">
								<span>皮卡皮卡猴</span>
								<div class="exItem_way">可兑换<i>2200</i>积分</div>
							</div>
							<div class="exItem_time">剩余<i>10</i>天</div>
							<img src="img/c_8.png" alt="" class="exItem_click"/>
						</li>-->
					</ul>
				</div>
			</div>
		</div>
	</body>
	<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/comment.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/fastclick.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/pdlist1.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">
		FastClick.attach(document.body);
		var o = {
			init:function(){
				o.oClick();
				o.scrollData();
			},
			scrollData:function(){
				var mescroll = new MeScroll("mescroll", {
					up: {
						use: true,
						auto: true,
						clearEmptyId: "intList", 
						callback: getListData, 
					},
					down: {
						use: false
					}
				});
				function getListData(page){
					console.log(page);
					getListDataFromNet(page.num, page.size, function(data){
						mescroll.endSuccess(data.length);
						console.log(data.length);
						setListData(data);
					});
				}
				function setListData(data){
					var oHtml='';
					
					for (var i = 0; i < 10; i++) {
							oHtml+='<li><img src="img/c_6.png" alt="" class="exItem_img"/><div class="exItem_name"><span>皮卡皮卡猴</span><div class="exItem_way">可兑换<i>2200</i>积分</div></div><div class="exItem_time">剩余<i>10</i>天</div><img src="img/c_8.png" alt="" class="exItem_click"/></li>'
					}
					$('#intList').attr('otype',1);
					$('#intList').append(oHtml);
				}
				
				function getListDataFromNet(pageNum,pageSize,successCallback) {
	                setTimeout(function () {
	                	/*$.ajax({
			                type: 'GET',
			                url: '',
			                dataType: 'json',
			                success: function(data){*/
			                	var data=pdlist1;
			                	var listData=[];
								for (var i = (pageNum-1)*pageSize; i < pageNum*pageSize; i++) {
				            		if(i==data.length) break;
				            		listData.push(data[i]);
				            	}
								console.log(pageNum)
								if(pageNum == 2)listData = [];
			                	successCallback(listData);
			               /* }
		            	});*/
	                },1000)
				}
			},
			oClick:function(){
				$('.backInt').on('click',function(){
					window.history.back();
				});
			}
		}
		o.init();
	</script>

</html>